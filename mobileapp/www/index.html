<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>VILLEN Music</title>
    <meta name="description" content="VILLEN - Your Premium Personal Music Player">
    <meta name="theme-color" content="#0a0612">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Mobile-specific overrides */
        @media (max-width: 768px) {
            .app-container {
                display: flex;
                flex-direction: column;
                grid-template-columns: none;
                grid-template-rows: none;
            }

            .sidebar {
                display: none;
            }

            .right-panel {
                display: none;
            }

            .main-content {
                flex: 1;
                padding: 16px;
                padding-bottom: calc(var(--player-height) + 60px);
                overflow-y: auto;
            }

            .player-bar {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                flex-direction: column;
                height: auto;
                padding: 12px 16px;
                padding-bottom: max(12px, env(safe-area-inset-bottom));
                background: var(--glass);
                backdrop-filter: blur(20px);
                border-top: 1px solid var(--glass-border);
            }

            .now-playing {
                display: flex;
                width: 100%;
                margin-bottom: 8px;
            }

            .player-controls {
                width: 100%;
            }

            .control-buttons {
                justify-content: center;
                gap: 16px;
            }

            .extra-controls {
                display: none;
            }

            .progress-container {
                margin-top: 8px;
            }

            .songs-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }

            .song-card {
                padding: 10px;
            }

            .search-container {
                max-width: 100%;
            }

            .queue-panel {
                display: none;
            }

            /* Mobile bottom nav */
            .mobile-nav {
                display: flex;
                position: fixed;
                bottom: calc(var(--player-height) + 20px);
                left: 0;
                right: 0;
                background: var(--glass);
                backdrop-filter: blur(20px);
                border-top: 1px solid var(--glass-border);
                justify-content: space-around;
                padding: 8px 0;
                padding-bottom: max(8px, env(safe-area-inset-bottom));
                z-index: 100;
            }

            .mobile-nav-item {
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 4px;
                color: var(--text-muted);
                font-size: 10px;
                cursor: pointer;
                padding: 8px 16px;
                transition: all 0.2s;
            }

            .mobile-nav-item.active {
                color: var(--accent-primary);
            }

            .mobile-nav-item svg {
                width: 24px;
                height: 24px;
            }
        }

        @media (min-width: 769px) {
            .mobile-nav {
                display: none;
            }
        }
    </style>
</head>

<body>

    <div class="app-container">
        <!-- Dynamic Album Background -->
        <div id="albumBackground"></div>

        <!-- Sidebar (hidden on mobile) -->
        <nav class="sidebar">
            <div class="logo">
                <div class="logo-icon">üéß</div>
                <span>VILLEN</span>
            </div>

            <div class="nav-section">
                <div class="nav-label">Library</div>
                <div class="nav-item active" data-section="home" onclick="showSection('home')">
                    <span class="nav-emoji">üî•</span>
                    <span>Trends</span>
                </div>
                <div class="nav-item" data-section="liked" onclick="showSection('liked')">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
                    </svg>
                    <span>Liked</span>
                </div>
                <div class="nav-item" data-section="recent" onclick="showSection('recent')">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z" />
                    </svg>
                    <span>Recent</span>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header with Search -->
            <header class="header">
                <div class="search-container">
                    <svg class="search-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
                    </svg>
                    <input type="text" id="searchInput" class="search-input" placeholder="Search songs, artists..."
                        oninput="handleSearch(this.value)">
                </div>
            </header>

            <!-- Home Section -->
            <section id="homeSection">
                <div class="loading">
                    <div class="spinner"></div>
                </div>
            </section>

            <!-- Search Results Section -->
            <section id="searchSection" style="display: none;">
                <div class="section">
                    <div class="section-header">
                        <h2 class="section-title">üîç Search Results</h2>
                    </div>
                    <div id="resultsContainer"></div>
                </div>
            </section>

            <!-- Liked Songs Section -->
            <section id="likedSection" style="display: none;">
                <div class="section">
                    <div class="section-header">
                        <h2 class="section-title">‚ù§Ô∏è Liked Songs</h2>
                        <span class="see-all" onclick="playAllLiked()">Play All</span>
                    </div>
                    <div id="likedContainer"></div>
                </div>
            </section>

            <!-- Recently Played Section -->
            <section id="recentSection" style="display: none;">
                <div class="section">
                    <div class="section-header">
                        <h2 class="section-title">üïê Recently Played</h2>
                        <span class="see-all" onclick="clearRecentlyPlayed()">Clear</span>
                    </div>
                    <div id="recentContainer"></div>
                </div>
            </section>

            <!-- Offline/Downloads Section -->
            <section id="offlineSection" style="display: none;">
                <div class="section">
                    <div class="section-header">
                        <h2 class="section-title">‚¨áÔ∏è Downloads</h2>
                    </div>
                    <div id="offlineContainer"></div>
                </div>
            </section>
        </main>

        <!-- Right Panel (hidden on mobile) -->
        <aside class="right-panel">
            <div class="panel-header">
                <h3 class="panel-title">
                    <span class="icon">üéµ</span> Currently Playing
                </h3>
            </div>

            <!-- Now Playing Card -->
            <div id="currentlyPlayingCard" class="now-playing-card">
                <img id="nowPlayingImage" class="now-playing-image" src="" alt="" style="display: none;">
                <div id="nowPlayingDetails">
                    <p style="color: var(--text-muted); font-size: 13px;">No song playing</p>
                </div>
                <!-- Visualizer -->
                <div id="visualizer" class="visualizer-container" style="display: none;">
                    <div class="visualizer-bar" style="height: 10px;"></div>
                    <div class="visualizer-bar" style="height: 20px;"></div>
                    <div class="visualizer-bar" style="height: 15px;"></div>
                    <div class="visualizer-bar" style="height: 25px;"></div>
                    <div class="visualizer-bar" style="height: 18px;"></div>
                    <div class="visualizer-bar" style="height: 30px;"></div>
                    <div class="visualizer-bar" style="height: 22px;"></div>
                    <div class="visualizer-bar" style="height: 16px;"></div>
                    <div class="visualizer-bar" style="height: 28px;"></div>
                    <div class="visualizer-bar" style="height: 12px;"></div>
                </div>
            </div>

            <!-- Lyrics Panel -->
            <div class="section" id="lyricsSection" style="display: none;">
                <div class="section-header">
                    <h3 class="panel-title">üìù Lyrics</h3>
                </div>
                <div id="lyricsPanel" class="lyrics-panel">
                    <p class="lyrics-line">Loading lyrics...</p>
                </div>
            </div>

            <!-- Next Songs -->
            <div class="section">
                <div class="section-header">
                    <h3 class="panel-title">
                        <span class="icon">üìã</span> Next Songs
                    </h3>
                </div>
                <div id="nextSongsList" class="next-songs-list">
                    <div class="empty-state">
                        <p>Queue is empty</p>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Player Bar -->
        <footer class="player-bar">
            <!-- Now Playing -->
            <div id="nowPlaying" class="now-playing"></div>

            <!-- Player Controls -->
            <div class="player-controls">
                <div class="control-buttons">
                    <button id="shuffleBtn" class="control-btn" onclick="toggleShuffle()">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm.33 9.41l-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13z" />
                        </svg>
                    </button>
                    <button class="control-btn" onclick="playPrevious()">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z" />
                        </svg>
                    </button>
                    <button id="playPauseBtn" class="control-btn play-pause-btn" onclick="togglePlay()">
                        <svg viewBox="0 0 24 24">
                            <path d="M8 5v14l11-7z" fill="currentColor" />
                        </svg>
                    </button>
                    <button class="control-btn" onclick="playNext()">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z" />
                        </svg>
                    </button>
                    <button id="repeatBtn" class="control-btn" onclick="toggleRepeat()">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z" />
                        </svg>
                    </button>
                </div>

                <div class="progress-container">
                    <span id="currentTime" class="time current">0:00</span>
                    <div id="progressBar" class="progress-bar">
                        <div id="progressFill" class="fill" style="width: 0%">
                            <div class="handle"></div>
                        </div>
                    </div>
                    <span id="duration" class="time">0:00</span>
                </div>
            </div>

            <!-- Extra Controls (hidden on mobile) -->
            <div class="extra-controls">
                <button class="extra-btn" onclick="if(state.currentSong) toggleLike(state.currentSong)">
                    <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                        <path
                            d="M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3z" />
                    </svg>
                </button>
                <div class="volume-control">
                    <button id="volumeBtn" class="control-btn" onclick="setVolume(state.volume > 0 ? 0 : 0.7)">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z" />
                        </svg>
                    </button>
                    <div id="volumeSlider" class="volume-slider">
                        <div id="volumeFill" class="fill" style="width: 70%"></div>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- Mobile Bottom Navigation -->
    <nav class="mobile-nav">
        <div class="mobile-nav-item active" data-section="home" onclick="showSection('home')">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" />
            </svg>
            <span>Home</span>
        </div>
        <div class="mobile-nav-item" data-section="search" onclick="document.getElementById('searchInput').focus()">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path
                    d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
            </svg>
            <span>Search</span>
        </div>
        <div class="mobile-nav-item" data-section="liked" onclick="showSection('liked')">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path
                    d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
            </svg>
            <span>Liked</span>
        </div>
        <div class="mobile-nav-item" data-section="recent" onclick="showSection('recent')">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path
                    d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z" />
            </svg>
            <span>Recent</span>
        </div>
    </nav>

    <!-- Context Menu -->
    <div id="contextMenu" class="context-menu">
        <div class="context-menu-item" onclick="contextMenuAction('play')">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M8 5v14l11-7z" />
            </svg>
            <span>Play Now</span>
        </div>
        <div class="context-menu-item" onclick="contextMenuAction('playNext')">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z" />
            </svg>
            <span>Play Next</span>
        </div>
        <div class="context-menu-item" onclick="contextMenuAction('addQueue')">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path
                    d="M15 6H3v2h12V6zm0 4H3v2h12v-2zM3 16h8v-2H3v2zM17 6v8.18c-.31-.11-.65-.18-1-.18-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3V8h3V6h-5z" />
            </svg>
            <span>Add to Queue</span>
        </div>
        <div class="context-menu-divider"></div>
        <div class="context-menu-item" onclick="contextMenuAction('like')">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path
                    d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
            </svg>
            <span id="contextLikeText">Add to Liked</span>
        </div>
        <div class="context-menu-divider"></div>
        <div class="context-menu-item" onclick="contextMenuAction('artist')">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path
                    d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
            </svg>
            <span>Go to Artist</span>
        </div>
    </div>

    <!-- Sleep Timer Modal -->
    <div id="timerModal" class="timer-modal" onclick="closeTimerModal(event)">
        <div class="timer-content" onclick="event.stopPropagation()">
            <h2>‚è∞ Sleep Timer</h2>
            <div class="timer-options">
                <div class="timer-option" onclick="setSleepTimer(5)">5 minutes</div>
                <div class="timer-option" onclick="setSleepTimer(15)">15 minutes</div>
                <div class="timer-option" onclick="setSleepTimer(30)">30 minutes</div>
                <div class="timer-option" onclick="setSleepTimer(45)">45 minutes</div>
                <div class="timer-option" onclick="setSleepTimer(60)">1 hour</div>
                <div class="timer-option" onclick="setSleepTimer(0)">Off</div>
            </div>
            <p id="timerStatus" style="margin-top: 16px; font-size: 12px; color: var(--text-muted);"></p>
        </div>
    </div>

    <!-- Themes Modal -->
    <div id="themesModal" class="timer-modal" onclick="closeThemesModal(event)">
        <div class="timer-content" onclick="event.stopPropagation()">
            <h2>üé® Select Theme</h2>
            <div class="timer-options" style="grid-template-columns: 1fr 1fr;">
                <div class="timer-option" onclick="setTheme('default')" style="border-left: 4px solid #9d4edd">Default
                </div>
                <div class="timer-option" onclick="setTheme('theme-ocean')" style="border-left: 4px solid #00f2ff">Ocean
                </div>
                <div class="timer-option" onclick="setTheme('theme-crimson')" style="border-left: 4px solid #ff1e1e">
                    Crimson</div>
                <div class="timer-option" onclick="setTheme('theme-emerald')" style="border-left: 4px solid #2eff5f">
                    Emerald</div>
                <div class="timer-option" onclick="setTheme('theme-gold')" style="border-left: 4px solid #ffd700">Gold
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <script src="app.js"></script>

</body>

</html>